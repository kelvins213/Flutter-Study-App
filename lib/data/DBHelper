import 'dart:async';
import 'package:path/path.dart';
import 'package:sqflite/sqflite.dart';
import 'package:untitled4/data/database_contents.dart';

class DBHelper {

  static List subjectList = DatabaseContents.subjects_contents;
  //static List portuguese = DatabaseContents.portuguese_contents;
  //static List maths = DatabaseContents.maths_contents;
  //static List history = DatabaseContents.history_contents;
  //static List geografy = DatabaseContents.geografy_contents;
  //static List philosophy = DatabaseContents.philosophy_contents;
  //static List sociology = DatabaseContents.sociology_contents;
  //static List physical = DatabaseContents.physical_contents;
  //static List portuguese = DatabaseContents.portuguese_contents;
  //static List portuguese = DatabaseContents.portuguese_contents;

  initDB() async {
    String databasePath = await getDatabasesPath();
    String path = join(databasePath, "subjects2.db");
    print(path);

    Database database = await openDatabase(
        path,
        version: 1,
        onCreate: onCreate,
    );
        return database;
  }


  Future<FutureOr<void>> onCreate(Database db, int version) async{
    String sql;



    sql = "create table Title(titleID INTERGER PRIMARY KEY, title varchar(40))";
    await db.execute(sql);

    sql = "create table Icon(iconID INTERGER PRIMARY KEY, iconName varchar(40))";
    await db.execute(sql);

    sql = "create table TitleAppBar(titleappbarID INTERGER PRIMARY KEY, titleAppBar varchar(40))";
    await db.execute(sql);

    sql = "create table Image(imageID INTERGER PRIMARY KEY, imageLink varchar(300))";
    await db.execute(sql);

    sql = "create table Concept(conceptID INTERGER PRIMARY KEY, concept varchar(500))";
    await db.execute(sql);

    insertIntoDatas(db: db);
  }

  Future<FutureOr<void>> insertIntoDatas({
    required Database db,
  }) async{
    String sql;
    int count = 0;

    for (var i in subjectList) {
      print(i);
      for (var j in i) {
        print(j);
        sql = "insert into Title(titleID, title) values ('$count', '${j.titulo}');";
        await db.execute(sql);

        sql = "insert into Icon(iconID, iconName) values ('$count', '${j.icon}');";
        await db.execute(sql);

        sql = "insert into TitleAppBar(titleappbarID, titleAppBar) values ('$count', '${j.titleAppBar}');";
        await db.execute(sql);

        sql = "insert into Image(imageID, imageLink) values ('$count', '${j.imagem}');";
        await db.execute(sql);

        sql = "insert into Concept(conceptID, concept) values ('$count', '${j.conceito}');";
        await db.execute(sql);
        count++;
      }
    }
  }
}
